<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">

<title>Dashboard - Minecraft.index</title>
<link rel="icon" type="image/png" href="../static/img/favicon.png">

<style>

/* === BASE === */
body {
    margin: 0;
    padding: 0;
    background: #05060d;
    font-family: 'Segoe UI', sans-serif;
    overflow-x: hidden;
    color: white; /* <-- TÜM YAZILAR BEYAZ */
}

/* P tag'leri garanti beyaz olsun */
p { color: white; }

/* === SCANLINES === */
body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    background: repeating-linear-gradient(
            to bottom,
            rgba(255,255,255,0.015) 0px,
            rgba(255,255,255,0.015) 1px,
            transparent 2px,
            transparent 4px
    );
    z-index: 9999;
    mix-blend-mode: overlay;
}

/* === RGB FLOATING SHADER === */
.shader-rgb {
    position: fixed;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, #00eaff33, transparent 60%);
    filter: blur(130px);
    animation: rgbfloat 10s infinite alternate ease;
    z-index: -1;
}

@keyframes rgbfloat {
    0% { transform: translate(-10%, -10%); }
    100% { transform: translate(10%, 10%); }
}

/* === HEADER === */
.title {
    font-size: 48px;
    font-weight: 900;
    padding: 40px;
    text-align: center;
    color: white;
    letter-spacing: 2px;
    animation: titleglitch 3s infinite;
}

@keyframes titleglitch {
    0%, 100% { text-shadow: 0 0 10px #00eaff; }
    30% { text-shadow: 2px 0 #ff0055, -2px 0 #00f0ff; }
    60% { text-shadow: -2px 1px #ff00ff, 2px -1px #00ffe1; }
}

/* === CONTENT CARDS === */
.container {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    padding: 40px;
    gap: 30px;
}

.card {
    background: rgba(17, 20, 32, 0.55);
    border: 1px solid #1d2638;
    padding: 22px;
    border-radius: 14px;
    box-shadow: 0 0 25px #00eaff22;
    backdrop-filter: blur(12px);
    transition: 0.35s;
    position: relative;
    overflow: hidden;
}

/* shader distortion */
.card::after {
    content: "";
    position: absolute;
    top: -20%;
    left: -20%;
    width: 140%;
    height: 140%;
    background: conic-gradient(from 180deg, #00eaff20, transparent);
    transform: rotate(0deg);
    transition: 0.4s ease;
    opacity: 0;
}

.card:hover::after {
    transform: rotate(40deg);
    opacity: 1;
}

.card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 0 40px #00eaff66;
}

.card h3 {
    color: #00eaff;
    margin-bottom: 8px;
}

/* === BUTTON === */
.btn {
    padding: 12px 18px;
    border: none;
    background: linear-gradient(90deg, #00eaff, #00ffd0);
    border-radius: 10px;
    font-weight: 700;
    cursor: pointer;
    margin-top: 8px;
    color: #000000; /* <-- BUTON YAZISI BEYAZ YAPILDI */
    transition: 0.3s;
    box-shadow: 0 0 18px #00eaffaa;
}

.btn:hover {
    transform: translateY(-4px);
    box-shadow: 0 0 30px #00ffe1ee;
}

</style>
</head>
<body>

<div class="shader-rgb"></div>

<div class="title">Dashboard with Shaders</div>

<div class="container">

    <div class="card">
        <h3>Uptime</h3>
        <p id="uptime">Loading...</p>
    </div>

    <div class="card">
        <h3>CPU Usage</h3>
        <p id="cpu">Loading...</p>
    </div>

    <div class="card">
        <h3>API Test</h3>
        <button class="btn" onclick="testAPI()">Run Test</button>
        <p id="testResult"></p>
    </div>

    <div class="card">
        <h3>Shader Log</h3>
        <div style="height:120px; overflow-y:auto;" id="logBox">Loading...</div>
    </div>

</div>

<script>
function updateUptime() {
    fetch("/api/uptime")
        .then(r => r.json())
        .then(d => uptime.innerText = d.uptime_seconds + "s");
}

function updateCPU() {
    fetch("/api/cpu")
        .then(r => r.json())
        .then(d => cpu.innerText = d.cpu_percent + "%");
}

function testAPI() {
    fetch("/api/test")
        .then(r => r.json())
        .then(d => testResult.innerText = d.message);
}

function loadLogs() {
    fetch("/api/mini_log")
        .then(r => r.json())
        .then(d => {
            logBox.innerHTML = "";
            d.recent.forEach(x => logBox.innerHTML += "• " + x + "<br>");
        });
}

setInterval(updateUptime, 1000);
setInterval(updateCPU, 900);
setInterval(loadLogs, 1500);

updateUptime();
updateCPU();
loadLogs();
</script>

</body>
</html>
